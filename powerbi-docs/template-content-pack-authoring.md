---
title: Создание пакетов содержимого шаблонов в Power BI
description: Создание пакета содержимого шаблонов
author: maggiesMSFT
manager: kfile
ms.reviewer: ''
ms.service: powerbi
ms.component: powerbi-service
ms.topic: conceptual
ms.date: 10/09/2017
ms.author: maggies
ms.openlocfilehash: 8b7c46ad1e9ea9c4c79a8f5a1b48c73ab3336306
ms.sourcegitcommit: 3a287ae4ab16d1e76caed651bd8ae1a1738831cd
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/19/2018
ms.locfileid: "39157576"
---
# <a name="author-template-content-packs-in-power-bi"></a>Создание пакетов содержимого шаблонов в Power BI
При создании пакета содержимого шаблонов используются Power BI Desktop и PowerBI.com. Пакет содержимого включает четыре компонента:

* Запросы позволяют [подключать](desktop-connect-to-data.md) и [преобразовывать](desktop-query-overview.md) данные, а также определять [параметры](https://powerbi.microsoft.com/blog/deep-dive-into-query-parameters-and-power-bi-templates/).  
* Модель данных для создания [отношений](desktop-create-and-manage-relationships.md), [мер](desktop-measures.md) и доработок в вопросах и ответах.  
* [Страницы](desktop-report-view.md) отчета включают визуальные элементы и фильтры для анализа данных.  
* [Панели мониторинга](service-dashboards.md) и [плитки](service-dashboard-create.md) содержат обзор результатов анализа.  

Каждый из этих элементов может быть вам знаком как существующая функция Power BI. При создании пакета содержимого необходимо учитывать дополнительные параметры по каждому аспекту. Дополнительные сведения см. в следующем разделе.

<a name="queries"></a>

## <a name="queries"></a>Запросы
В пакетах содержимого шаблонов запросы, созданные в Power BI Desktop, используются для подключения к источникам данных и импорта данных. Эти запросы необходимы для получения согласованных схем и позволяют обновлять данные по расписанию (прямые запросы не поддерживаются).

Каждый пакет содержимого шаблона поддерживает только один источник данных, поэтому будьте внимательны при составлении запросов. Один источник данных — это источник, для которого требуется единая процедура аутентификации. Вы можете создавать несколько вызовов API в разных запросах, если все эти вызовы обращаются к одной и той же конечной точке API и проходят аутентификацию одного типа. Пакеты содержимого Power BI не поддерживают несколько источников, которые проходят аутентификацию разных типов.

### <a name="connect-to-your-api"></a>Подключение к API
Чтобы приступить к созданию запросов, нужно подключиться к API из Power BI Desktop.

Для подключения к API можно использовать стандартные соединители данных, доступные в Power BI Desktop. Вы можете использовать соединитель веб-данных ("Получить данные" -> "Интернет"), чтобы подключиться к REST API, или соединитель OData ("Получить данные" -> "Канал OData"), чтобы подключиться к каналу OData. Обратите внимание, что эти соединители будут работать по умолчанию, только если API поддерживает обычную аутентификацию.

> [!NOTE]
> Если API использует другие типы аутентификации (например, с использованием OAuth 2.0 или ключа веб-API), вам нужно разработать собственный соединитель данных, чтобы разрешить Power BI Desktop подключиться к API, пройдя аутентификацию. Дополнительные сведения о том, как разработать собственный соединитель данных для пакета содержимого, см. [здесь](https://aka.ms/DataConnectors). 
>
>

### <a name="consider-the-source"></a>Зависимость от источника
Запросы определяют, какие данные будут включены в модель данных. В зависимости от размера вашей системы такие запросы также должны включать фильтры, гарантирующие, что ваши клиенты будут работать с контролируемым размером, соответствующим вашему бизнес-сценарию.

Пакеты содержимого Power BI могут параллельно выполнять сразу несколько запросов для нескольких пользователей.  Заранее продумайте стратегию регулирования и согласования и спросите нас, как сделать ваш пакет содержимого устойчивым к сбоям.

### <a name="schema-enforcement"></a>Применение схемы
Убедитесь, что ваши запросы устойчивы к изменениям в системе, так как изменения в схеме в момент обновления могут нарушить модель. Если в ответ на некоторые запросы источник может выдавать пустой результат или сообщать об отсутствии схемы, можно настроить возврат пустой таблицы или сообщений об ошибках, которые будут понятны пользователю.

### <a name="parameters"></a>Параметры
[Параметры](https://powerbi.microsoft.com/blog/deep-dive-into-query-parameters-and-power-bi-templates/) в Power BI Desktop позволяют пользователям указывать входные значения для настройки извлекаемых данных. Заранее продумайте параметры, чтобы избежать дополнительной работы после создания подробных запросов или отчетов.

> [!NOTE]
> Пакеты содержимого шаблонов сейчас поддерживают только текстовые параметры. В процессе разработки можно использовать другие типы параметров, но при [тестировании](template-content-pack-testing.md#templates) все указанные пользователями значения будут буквенными.
>
>

### <a name="additional-query-tips"></a>Дополнительные рекомендации по запросам

* Убедитесь, что все столбцы набраны правильно.
* Столбцы имеют информативные имена (см. "Вопросы и ответы").  
* Для совместно используемой логики можно применять функции и запросы.  
* Служба пока не поддерживается уровнями конфиденциальности. Если вы получили запрос об уровнях конфиденциальности, перепишите запрос таким образом, чтобы он задействовал относительные пути.  

## <a name="data-model"></a>Модель данных

Четко определенная модель данных позволит вашим клиентам легко и интуитивно понятно взаимодействовать с пакетом содержимого. Создайте модель данных в Power BI Desktop.

> [!NOTE]
> Основное моделирование (типизация, имена столбцов) должно осуществляться преимущественно с использованием [запросов](#queries).
>
>

### <a name="qa"></a>Вопросы и ответы
От моделирования также зависит, насколько хорошие результаты предоставит функция вопросов и ответов вашим клиентам. Добавьте синонимы к часто используемым столбцам и следите за тем, чтобы столбцы были правильно указаны в [запросах](#queries).

### <a name="additional-data-model-tips"></a>Дополнительные рекомендации по модели данных
* Ко всем столбцам значений применено форматирование.
    >[!NOTE]
    >В запросе должны применяться типы.  
* Ко всем мерам применено форматирование.  
* Выбрано формирование сводных данных по умолчанию, в частности "Не суммировать", если применимо (например, для уникальных значений).  
* Задана категория данных, если применимо.  
* Отношения заданы, если это необходимо.  

## <a name="reports"></a>Отчеты
Страницы отчета позволяют получить более глубокий анализ данных, включенных в пакет содержимого. Используйте их для получения ответов на основные вопросы, для решения которых был создан пакет содержимого. Отчеты создаются с помощью Power BI Desktop.

> [!NOTE]
> В пакет содержимого можно включить только один отчет. Обращаться к конкретным разделам сценария можно при помощи разных страниц.
>
>

### <a name="additional-report-tips"></a>Дополнительные рекомендации по отчетам
* Для перекрестной фильтрации используйте больше одного визуального элемента на страницу отчета.  
* Тщательно выравнивайте визуальные элементы (избегайте наложения).  
* Выбирайте для макета режим "4:3" или "16:9".  
* Все представленные агрегаты должны иметь смысл (средние, уникальные значения).  
* Фрагментирование должно давать адекватные результаты.  
* Как минимум в верхней части отчета должен присутствовать логотип.  
* По возможности элементы должны быть представлены в цветах клиента.  

<a name="dashboard"></a>

## <a name="dashboard"></a>Панель мониторинга
Основным инструментом взаимодействия с пакетом содержимого для ваших клиентов служит панель мониторинга. Она должна содержать обзор содержимого пакета, особенно меры, играющие важную роль в вашем бизнес-сценарии.

Чтобы создать панель мониторинга для пакета содержимого шаблонов, просто отправьте PBIX-файл через меню "Получить данные" > "Файлы" или опубликуйте его непосредственно из Power BI Desktop.

> [!NOTE]
> Сейчас пакеты содержимого шаблонов должны включать один отчет и один набор данных. Не закрепляйте на панели мониторинга, используемой в пакете содержимого, содержимое из нескольких отчетов или наборов данных.
>
>

### <a name="additional-dashboard-tips"></a>Дополнительные рекомендации по панелям мониторинга
* Закрепляя плитки на панели мониторинга, придерживайтесь одной общей темы.  
* Прикрепите к теме логотип, чтобы клиенты знали, откуда пакет.  
* Рекомендуется использовать макет шириной в 5–6 элементов, подходящий для большинства разрешений экранов.  
* Все плитки на панели мониторинга должны иметь соответствующие заголовки и подписи.  
* Плитки различных сценариев на панели мониторинга можно сгруппировать (вертикально или горизонтально).  

<a name="restrictions"></a>

## <a name="summary-of-restrictions"></a>Обзор ограничений
Как указано в предыдущих разделах, в настоящее время пакеты содержимого шаблона имеют следующие ограничения:  

| Поддерживаются | *Не поддерживается* |
| --- | --- |
| Наборы данных, встроенные в PBI Desktop |*Наборы данных из других пакетов содержимого или такие входные данные, как файлы Excel* |
| Источник данных, поддерживаемый для обновления данных в облаке по расписанию |*Прямой запрос и локальное подключение* |
| Запросы, возвращающие согласованную схему или соответствующие ошибки |*Динамические или пользовательские схемы* |
| Один источник данных на набор данных |*Несколько источников данных, включая гибридные приложения и URL-адреса, определяемые как множественные источники данных* |
| Параметры текстового типа |*Другие типы параметров (например, дата) или "Список разрешенных значений"* |
| Одна панель мониторинга, отчет и набор данных |*Несколько панелей мониторинга, отчетов и наборов данных* |

## <a name="next-step"></a>Дальнейшие действия
[Проверка и отправка содержимого пакета](template-content-pack-testing.md)