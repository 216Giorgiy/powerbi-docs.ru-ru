---
title: "Статистические функции (сумма, среднее, максимум и т. д.) в Power BI"
description: "Изменение статистической функции в диаграмме (сумма, среднее, максимум и т. д.) в Power BI"
services: powerbi
documentationcenter: 
author: mihart
manager: kfile
backup: 
editor: 
tags: 
qualityfocus: modifying
qualitydate: 
ms.service: powerbi
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: powerbi
ms.date: 09/23/2017
ms.author: mihart
ms.openlocfilehash: 42f9ec1dd56c2317bec07abde9822fc2b5340c07
ms.sourcegitcommit: 99cc3b9cb615c2957dde6ca908a51238f129cebb
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/13/2017
---
# <a name="aggregates-in-power-bi"></a>Статистические выражения в Power BI
## <a name="what-is-an-aggregate"></a>Что такое статистическое выражение?
Иногда в столбце нужно выполнить математическую операцию с использованием значений строк. К таким операциям относятся сложение, вычисление среднего или максимального значения, подсчет и др. Выполнение математических операций с использованием значений строк в столбце называется "созданием статистических выражений". В результате таких операций появляются *статистические выражения*. 

Числовое поле представляет собой значение, которое будет использовано для статистических выражений (например, для вычисления суммы или среднего значения) в поле категории.  Например, "объем продаж по продукту" и "количество дефектов по регионам". Числовые значения часто также называют **мерами**. В списке полей показатели отображаются с символом ∑. Дополнительные сведения см. в статье [Знакомство с редактором отчетов](service-the-report-editor-take-a-tour.md).

Иногда *мера* на самом деле является *вычисляемой мерой*. Вычисляемые меры в Power BI импортируются вместе с данными, определенными в модели данных, на которой основан отчет. Каждая вычисляемая мера имеет собственную жестко заданную формулу. Используемый тип статистического вычисления нельзя изменить: например, если это сумма, вы не получите ничего, кроме суммы. В списке полей *вычисляемые меры* отображаются с символом калькулятора. Дополнительные сведения о создании вычисляемых мер см. в статье [Меры в Power BI Desktop](desktop-measures.md).

Поля категорий не являются числовыми, но к ним также можно применять статистические выражения.  Когда поля категорий помещаются в контейнер *только числовых значений*, такой как **Значения** или **Подсказки**, Power BI может подсчитать количество экземпляров каждой категории или количество уникальных экземпляров каждой категории.  В Power BI есть несколько статистических выражений для строк и дат: самая первая, самая последняя, первая и последняя.  

## <a name="why-dont-aggregates-work-the-way-i-want-them-to"></a>Почему статистические выражения не работают так, как мне нужно?
Работа статистических выражений в службе Power BI может сбивать с толку. Например, в Power BI может не получиться изменить статистическое выражение для числового поля. Или, например, вы не хотите применять статистическое выражение к полю "год" — вам просто нужно подсчитать количество экземпляров.

Чаще всего источником проблемы является распределение полей по категориям в наборе данных Power BI. Поле может быть отнесено к категории текстовых полей, поэтому для него нельзя вычислить сумму или среднее значение. К сожалению, [категорию поля может изменить только владелец набора данных](desktop-measures.md).  

См. раздел **Советы и устранение неполадок** в конце этой статьи, чтобы разобраться в работе статистических выражений.  Если вы не нашли ответ на свой вопрос, опубликуйте его на [форуме сообщества Power BI](http://community.powerbi.com), чтобы получить оперативный ответ непосредственно от команды Power BI.

## <a name="change-how-a-numeric-field-is-aggregated"></a>Изменение вычисления числового поля
Предположим, имеется диаграмма, которая суммирует данные о продажах для различных регионов, однако вместо суммы требуется получить среднее значение. 

1. В режиме правки отчета добавьте меру в визуализации.
2. Найдите это поле на панели "Визуализации", щелкните его правой кнопкой мыши и выберите нужный тип вычисления. Если необходимое агрегирование не отображается, обратитесь к владельцу набора данных. Возможно, проблема заключается в способе категоризации поля владельцем.  
   
   ![](media/service-aggregates/aggregate_new.png)
   
   > [!NOTE]
   > Параметры, доступные в раскрывающемся списке, будут зависеть от выбранного поля и способа его категоризации владельцем набора данных.
   > 
   > 

Некоторые параметры, которые могут быть доступны для статистической обработки поля:

* **Не суммировать**. Если этот параметр выбран, каждое значение в этом поле обрабатывается отдельно и не суммируется. Это часто используется при наличии числового столбца идентификатора, который не должен суммироваться.
* **Сумма**. Все значения в этом поле суммируются.
* **Среднее**. Вычисляется среднее арифметическое значений.
* **Минимум**. Отображается самое низкое значение.
* **Максимум**. Отображается самое высокое значение.
* **Количество (не пустых).** Подсчитывается количество значений в этом поле, которые не являются пустыми.
* **Количество (уникальных).** Подсчитывается количество уникальных значений в этом поле.
* **Стандартное отклонение.**
* **Отклонение**.
* **Медиана**.  Показывает значение медианы (среднее). Это значение с тем же или меньшим числом элементов.  Если медиан две, Power BI вычисляет среднюю.

Например, эти данные:

| Страна | Объем |
|:--- |:--- |
| США |100 |
| Соединенное Королевство |150 |
| Канада |100 |
| Германия |125 |
| Франция | |
| Япония |125 |
| Австралия |150 |

выдадут следующие результаты:

* **Не суммировать**: каждое значение отображается отдельно
* **Сумма**: 750
* **Среднее**: 125
* **Максимум**: 150
* **Минимум**: 100
* **Количество (не пустых):** 6
* **Количество (уникальных):** 4
* **Стандартное отклонение:** 20.4124145...
* **Отклонение:** 416.666...
* **Медиана:** 125

## <a name="use-a-non-aggregated-field-as-a-numeric-field"></a>Использование нестатистического поля в качестве числового поля
Нестатистическое поле можно также использовать в качестве числового поля. Например, имеющееся поле "Название продукта" можно добавить в качестве **количественного значения** или **количественного значения с различными значениями**. 

1. Например, если выбрать **Магазин > Сеть магазинов**.
   
   ![](media/service-aggregates/count-of-chain-do_not_summarize.png)
2. Если изменить функцию агрегирования по умолчанию **Не суммировать** на **Количество уникальных**, Power BI подсчитает количество разных сетей магазинов. В этом случае их две — Fashions Direct и Lindseys.
   
   ![](media/service-aggregates/aggregates_count.png)
3. Если изменить функцию агрегирования на **Количество**, Power BI подсчитает общее количество. В этом случае для элемента **Сеть магазинов**будет отображено 104 записи. Добавив **Сеть магазинов** в качестве фильтра, можно увидеть, что для Fashions Direct существует 37 строк, а для Lindseys — 67 строк.  
   
   ![](media/service-aggregates/count_of_chain_104.png)

## <a name="tips-and-troubleshooting"></a>Советы и устранение неполадок
Вопрос. Почему не отображается параметр **Не суммировать**?

Ответ. Скорее всего, выбранное поле является вычисляемой мерой. Помните, что каждая вычисляемая мера имеет собственную жестко заданную формулу. Вы не можете изменить вычисление.

Вопрос. Мое поле **является** числовым, почему доступны только варианты **Количество** и **Число разных элементов**?

Ответ. Вероятно, владелец набора данных случайно или преднамеренно *не* отнес поле к категории числовых. Например, если в наборе данных есть поле **Год**, владелец набора данных может категоризировать его как текст, ведь поле **Год**, скорее всего, будет подсчитано (например, вычислено количество человек, родившихся в 1974 г.), а не суммировано или усреднено. Если вы владелец, откройте набор данных в Power BI Desktop и измените тип данных на вкладке **Моделирование**.  

Ответ. Еще один вариант: вы случайно поместили поле в *контейнер*, который допускает только категориальные значения.  В этом случае единственным доступными параметрами будут "Количество" и "Число разных элементов".

Ответ. Третье возможное объяснение: вы используете поле для оси. Например, на оси линейчатой диаграммы Power BI отображает одну панель для каждого уникального значения. Значения полей в этом случае вообще не вычисляются. ПРИМЕЧАНИЕ. Исключением из этого правила являются точечные диаграммы, для которых *требуются* вычисленные значения для осей X и Y.

Вопрос. Я использую точечную диаграмму и хочу, чтобы поле *не* вычислялось.  Как это сделать?

Ответ. Добавьте поле в контейнер **Сведения**, но не в контейнеры осей X и Y.

Вопрос. Когда я добавляю числовые поля в визуализацию, большинство полей по умолчанию суммируются, но для некоторых по умолчанию вычисляется среднее значение, количество или выполняется другая операция.  Почему статистическое выражение по умолчанию не всегда одинаковое?

Ответ. Владельцы наборов данных могут назначать суммирование по умолчанию для каждого поля. Если вы владелец набора данных, измените суммирование по умолчанию на вкладке **Моделирование** в Power BI Desktop.

Вопрос. Почему для **числового** поля в раскрывающемся списке не доступно ни одно статистическое выражение?

Ответ. Если рядом с полем отображается значок калькулятора, это поле является *вычисляемой мерой*. Каждая вычисляемая мера имеет свою жестко заданную формулу, которую нельзя изменить в службе Power BI. Используемое вычисление может быть простым статистическим выражением, например средним значением или суммой, но это может быть и более сложная операция, например "процент вклада в родительскую категорию" или "нарастающий итог с начала года". Power BI не суммирует и не находит среднее значение, но вместо этого просто повторно вычисляет значение (с помощью жестко заданной формулы) для каждой точки данных.

Вопрос. Я владелец набора данных. Я хочу, чтобы в поле никогда не выполнялось статистическое выражение.

Ответ. В Power BI Desktop на вкладке **Моделирование** установите для параметра **Тип данных** значение **Текст**.

Вопрос. В раскрывающемся списке не отображается параметр **Не суммировать**.

Ответ. Попробуйте удалить поле, а затем добавить его снова.

Появились дополнительные вопросы? [Ответы на них см. в сообществе Power BI.](http://community.powerbi.com/)

